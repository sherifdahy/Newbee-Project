<div class="container py-4">
  <h1 class="mb-4">๐ ุณูุฉ ุงูุชุณูู</h1>

  <div *ngIf="cartItems.length > 0; else emptyCart">
    <div class="row">
      <!-- Cart Items -->
      <div class="col-lg-8">
        <div class="card shadow-sm mb-3">
          <div class="card-header">
            <h5 class="mb-0">ุงูููุชุฌุงุช ({{cartItems.length}})</h5>
          </div>
          <div class="table-responsive">
            <table class="table mb-0">
              <thead class="table-light">
                <tr>
                  <th>ุงูููุชุฌ</th>
                  <th>ุงูุณุนุฑ</th>
                  <th>ุงููููุฉ</th>
                  <th>ุงูุฅุฌูุงูู</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of cartItems">
                  <td>
                    <div class="d-flex align-items-center">
                      <img [src]="item.image" class="rounded me-2" style="width: 60px; height: 60px; object-fit: cover;">
                      <div>
                        <strong>{{item.name}}</strong>
                      </div>
                    </div>
                  </td>
                  <td>{{item.price | number}} ุฌ.ู</td>
                  <td>
                    <div class="input-group" style="max-width: 100px;">
                      <button class="btn btn-sm btn-outline-secondary" type="button"
                        (click)="updateQuantity(item.id, item.quantity - 1)">-</button>
                      <input type="text" class="form-control text-center" [value]="item.quantity" readonly>
                      <button class="btn btn-sm btn-outline-secondary" type="button"
                        (click)="updateQuantity(item.id, item.quantity + 1)">+</button>
                    </div>
                  </td>
                  <td>
                    <strong>{{(item.price * item.quantity) | number}} ุฌ.ู</strong>
                  </td>
                  <td>
                    <button class="btn btn-sm btn-danger" (click)="removeItem(item.id)">ุญุฐู</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Coupon Code -->
        <div class="card shadow-sm">
          <div class="card-body">
            <div class="row g-2">
              <div class="col-md-8">
                <input type="text" class="form-control" placeholder="ุฃุฏุฎู ููุฏ ุงูุฎุตู...">
              </div>
              <div class="col-md-4">
                <button class="btn btn-outline-primary w-100" (click)="applyCoupon()">ุชุทุจูู</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Summary -->
      <div class="col-lg-4">
        <div class="card shadow-sm mb-3">
          <div class="card-header">
            <h5 class="mb-0">ููุฎุต ุงูุทูุจ</h5>
          </div>
          <div class="card-body">
            <div class="d-flex justify-content-between mb-2">
              <span>ุงููุฌููุน ุงููุฑุนู:</span>
              <strong>{{subtotal | number}} ุฌ.ู</strong>
            </div>
            <div class="d-flex justify-content-between mb-2">
              <span>ุงูุถุฑูุจุฉ (14%):</span>
              <strong>{{tax | number: '1.2-2'}} ุฌ.ู</strong>
            </div>

            <!-- Shipping Options -->
            <div class="mb-3">
              <label class="form-label">ุทุฑููุฉ ุงูุดุญู:</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="shipping" id="free" value="free"
                  (change)="calculateShipping('free')" checked>
                <label class="form-check-label" for="free">
                  ูุฌุงูู (ููุทูุจุงุช ุฃูุซุฑ ูู 500 ุฌ.ู)
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="shipping" id="standard" value="standard"
                  (change)="calculateShipping('standard')">
                <label class="form-check-label" for="standard">
                  ุนุงุฏู - 50 ุฌ.ู (2-3 ุฃูุงู)
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="shipping" id="express" value="express"
                  (change)="calculateShipping('express')">
                <label class="form-check-label" for="express">
                  ุณุฑูุน - 100 ุฌ.ู (1 ููู)
                </label>
              </div>
            </div>

            <div class="d-flex justify-content-between mb-3 pb-3 border-bottom">
              <span>ุฑุณูู ุงูุดุญู:</span>
              <strong>{{shippingCost | number}} ุฌ.ู</strong>
            </div>

            <div class="d-flex justify-content-between mb-3" style="font-size: 1.2rem;">
              <span>ุงูุฅุฌูุงูู ุงูููุงุฆู:</span>
              <strong class="text-success">{{total | number}} ุฌ.ู</strong>
            </div>

            <button class="btn btn-primary btn-lg w-100 mb-2" routerLink="/checkout">
              ูุชุงุจุนุฉ ุงูุฏูุน
            </button>
            <button class="btn btn-outline-secondary btn-lg w-100" routerLink="/">
              ุงูุนูุฏุฉ ููุชุณูู
            </button>
          </div>
        </div>

        <!-- Security Info -->
        <div class="alert alert-info small">
          <strong>๐ ุขูู:</strong> ุชู ุงูุชุญูู ูู ุงูุฏูุน ุจูุงุณุทุฉ Stripe ู PayPal
        </div>
      </div>
    </div>
  </div>

  <ng-template #emptyCart>
    <div class="text-center py-5">
      <div class="display-1 mb-3">๐</div>
      <h2>ุงูุณูุฉ ูุงุฑุบุฉ</h2>
      <p class="text-muted mb-4">ูู ุชุถู ุฃู ููุชุฌุงุช ุฅูู ุงูุณูุฉ ุญุชู ุงูุขู</p>
      <button class="btn btn-primary btn-lg" routerLink="/">ุงูุนูุฏุฉ ููุชุณูู</button>
    </div>
  </ng-template>
</div>
